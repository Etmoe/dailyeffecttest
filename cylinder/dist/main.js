!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var r=n(1),s=n(3),o=new Stats,a=new s.Renderer({lightEffect:!0}),h=document.querySelector(".container"),u=new s.Camera(1500);u.setPerspective(1500);var c=new s.Scene(h),l=new s.DirectionLight(new s.Vector3(0,0,1),1);c.addLight(l);for(var f=document.querySelectorAll(".item"),p=new s.Group,y=[],d=function(t){var e=f[t],n=new s.Face(e);n.backside=!0,n.frontElem=n.elem.querySelector(".item-front"),n.frontInnerElem=n.elem.querySelector(".item-front-inner"),n.backElem=n.elem.querySelector(".item-back"),n.backInnerElem=n.elem.querySelector(".item-back-inner"),n.lightHandler=function(t,e){var i=Math.max(e,.5).toFixed(2),r=4*(1-i)+"px";n.frontInnerElem.style.opacity=.3+.7*i,n.backInnerElem.style.opacity=.3+.7*i,n.frontInnerElem.style.filter="blur(".concat(r,")"),n.backInnerElem.style.filter="blur(".concat(r,")")},p.add(n),y.push(n)},m=0;m<f.length;m++)d(m);function x(){var t=h.offsetWidth,e=4*t/3,n=60*t/93,i=4*n/3,r=.95*n;h.style.height=e+"px",u.setPosition(0,0,r),u.setNeedUpdate(),y.forEach(function(t){t.elem.style.width=parseInt(n)+"px",t.elem.style.height=parseInt(i)+"px"});for(var s=0;s<f.length;s++){var o=y[s],l=2*Math.PI*(s/f.length),p=l+Math.PI/2;o.initialZ=Math.sin(p)*r,o.initialRotateY=-l,o.setRotationY(-l),o.setPosition(Math.cos(p)*r,0,Math.sin(p)*r)}a.render(c,u),c.resize()}c.add(p);var _=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.index=0,this.stepDur=1e3,this.spinDur=1e3,this.rotateTween=null,this.spinTween=null,this.tickT,this.tick(),x(),window.addEventListener("resize",x)}var e,n,s;return e=t,(n=[{key:"setIndex",value:function(t){var e=this;this.rotateTween&&r.remove(this.rotateTween);var n=Math.abs(this.index-t);if(0!==n){var i=p.rotation.y,s=t*Math.PI/3,o={rotate:i},a=Math.min(3e3,this.stepDur*n),h=new r.Tween(o).to({rotate:s},a).easing(r.Easing.Quadratic.Out).onUpdate(function(t){p.setRotationY(t.rotate),p.setNeedUpdate()}).onComplete(function(){e.rotateTween=null}).start();this.index=t,this.rotateTween=h,this.tick()}}},{key:"spin",value:function(){var t=this;this.spinTween&&r.remove(this.spinTween);var e=this.index,n=y[e].rotation.y,i=n+Math.PI,s={rotate:n},o=new r.Tween(s).to({rotate:i},this.spinDur).easing(r.Easing.Quadratic.Out).onUpdate(function(t){console.log(t),y[e].setRotationY(t.rotate)}).onComplete(function(){t.spinTween=null}).start();this.spinTween=o,this.tick()}},{key:"tick",value:function(){var t=this;cancelAnimationFrame(this.tickT);var e,n=(new Date).getTime(),i=(new Date).getTime();this.tickT=window.requestAnimationFrame(function s(){i=(new Date).getTime(),e=i-n,n=i,o.update(e),r.update(),a.render(c,u),(t.rotateTween||t.spinTween)&&(t.tickT=window.requestAnimationFrame(s))})}}])&&i(e.prototype,n),s&&i(e,s),t}());window.ani=_},function(t,e,n){(function(n){var i,r=function(){this._tweens={},this._tweensAddedDuringUpdate={}};r.prototype={getAll:function(){return Object.keys(this._tweens).map(function(t){return this._tweens[t]}.bind(this))},removeAll:function(){this._tweens={}},add:function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},remove:function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},update:function(t,e){var n=Object.keys(this._tweens);if(0===n.length)return!1;for(t=void 0!==t?t:o.now();n.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<n.length;i++){var r=this._tweens[n[i]];r&&!1===r.update(t)&&(r._isPlaying=!1,e||delete this._tweens[n[i]])}n=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var s,o=new r;o.Group=r,o._nextId=0,o.nextId=function(){return o._nextId++},"undefined"==typeof self&&void 0!==n&&n.hrtime?o.now=function(){var t=n.hrtime();return 1e3*t[0]+t[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?o.now=self.performance.now.bind(self.performance):void 0!==Date.now?o.now=Date.now:o.now=function(){return(new Date).getTime()},o.Tween=function(t,e){this._object=t,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=o.Easing.Linear.None,this._interpolationFunction=o.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onRepeatCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=e||o,this._id=o.nextId()},o.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(t,e){return this._valuesEnd=Object.create(t),void 0!==e&&(this._duration=e),this},duration:function(t){return this._duration=t,this},start:function(t){for(var e in this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0!==t?"string"==typeof t?o.now()+parseFloat(t):t:o.now(),this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[e]instanceof Array){if(0===this._valuesEnd[e].length)continue;this._valuesEnd[e]=[this._object[e]].concat(this._valuesEnd[e])}void 0!==this._object[e]&&(this._valuesStart[e]=this._object[e],this._valuesStart[e]instanceof Array==!1&&(this._valuesStart[e]*=1),this._valuesStartRepeat[e]=this._valuesStart[e]||0)}return this},stop:function(){return this._isPlaying?(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens(),this):this},end:function(){return this.update(1/0),this},stopChainedTweens:function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop()},group:function(t){return this._group=t,this},delay:function(t){return this._delayTime=t,this},repeat:function(t){return this._repeat=t,this},repeatDelay:function(t){return this._repeatDelayTime=t,this},yoyo:function(t){return this._yoyo=t,this},easing:function(t){return this._easingFunction=t,this},interpolation:function(t){return this._interpolationFunction=t,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(t){return this._onStartCallback=t,this},onUpdate:function(t){return this._onUpdateCallback=t,this},onRepeat:function(t){return this._onRepeatCallback=t,this},onComplete:function(t){return this._onCompleteCallback=t,this},onStop:function(t){return this._onStopCallback=t,this},update:function(t){var e,n,i;if(t<this._startTime)return!0;for(e in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),n=(t-this._startTime)/this._duration,n=0===this._duration||n>1?1:n,i=this._easingFunction(n),this._valuesEnd)if(void 0!==this._valuesStart[e]){var r=this._valuesStart[e]||0,s=this._valuesEnd[e];s instanceof Array?this._object[e]=this._interpolationFunction(s,i):("string"==typeof s&&(s="+"===s.charAt(0)||"-"===s.charAt(0)?r+parseFloat(s):parseFloat(s)),"number"==typeof s&&(this._object[e]=r+(s-r)*i))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object,n),1===n){if(this._repeat>0){for(e in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"==typeof this._valuesEnd[e]&&(this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(this._valuesEnd[e])),this._yoyo){var o=this._valuesStartRepeat[e];this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=o}this._valuesStart[e]=this._valuesStartRepeat[e]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,null!==this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var a=0,h=this._chainedTweens.length;a<h;a++)this._chainedTweens[a].start(this._startTime+this._duration);return!1}return!0}},o.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-o.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*o.Easing.Bounce.In(2*t):.5*o.Easing.Bounce.Out(2*t-1)+.5}}},o.Interpolation={Linear:function(t,e){var n=t.length-1,i=n*e,r=Math.floor(i),s=o.Interpolation.Utils.Linear;return e<0?s(t[0],t[1],i):e>1?s(t[n],t[n-1],n-i):s(t[r],t[r+1>n?n:r+1],i-r)},Bezier:function(t,e){for(var n=0,i=t.length-1,r=Math.pow,s=o.Interpolation.Utils.Bernstein,a=0;a<=i;a++)n+=r(1-e,i-a)*r(e,a)*t[a]*s(i,a);return n},CatmullRom:function(t,e){var n=t.length-1,i=n*e,r=Math.floor(i),s=o.Interpolation.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(r=Math.floor(i=n*(1+e))),s(t[(r-1+n)%n],t[r],t[(r+1)%n],t[(r+2)%n],i-r)):e<0?t[0]-(s(t[0],t[0],t[1],t[1],-i)-t[0]):e>1?t[n]-(s(t[n],t[n],t[n-1],t[n-1],i-n)-t[n]):s(t[r?r-1:0],t[r],t[n<r+1?n:r+1],t[n<r+2?n:r+2],i-r)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=o.Interpolation.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:(s=[1],function(t){var e=1;if(s[t])return s[t];for(var n=t;n>1;n--)e*=n;return s[t]=e,e}),CatmullRom:function(t,e,n,i,r){var s=.5*(n-t),o=.5*(i-e),a=r*r;return(2*e-2*n+s+o)*(r*a)+(-3*e+3*n-2*s-o)*a+s*r+e}}},void 0===(i=function(){return o}.apply(e,[]))||(t.exports=i)}).call(this,n(2))},function(t,e){var n,i,r=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(t){n=s}try{i="function"==typeof clearTimeout?clearTimeout:o}catch(t){i=o}}();var h,u=[],c=!1,l=-1;function f(){c&&h&&(c=!1,h.length?u=h.concat(u):l=-1,u.length&&p())}function p(){if(!c){var t=a(f);c=!0;for(var e=u.length;e;){for(h=u,u=[];++l<e;)h&&h[l].run();l=-1,e=u.length}h=null,c=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function y(t,e){this.fun=t,this.array=e}function d(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new y(t,e)),1!==u.length||c||a(p)},y.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=d,r.addListener=d,r.once=d,r.off=d,r.removeListener=d,r.removeAllListeners=d,r.emit=d,r.prependListener=d,r.prependOnceListener=d,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,n){"use strict";n.r(e);var i={};n.r(i),n.d(i,"R360",function(){return ot}),n.d(i,"R180",function(){return at}),n.d(i,"R150",function(){return ht}),n.d(i,"R120",function(){return ut}),n.d(i,"R90",function(){return ct}),n.d(i,"R60",function(){return lt}),n.d(i,"R45",function(){return ft}),n.d(i,"R30",function(){return pt});var r,s,o,a,h,u,c,l,f,p,y,d,m,x,_={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:(s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),o=new Array(36),a=0,function(){for(var t=0;t<36;t++)8===t||13===t||18===t||23===t?o[t]="-":14===t?o[t]="4":(a<=2&&(a=33554432+16777216*Math.random()|0),r=15&a,a>>=4,o[t]=s[19===t?3&r|8:r]);return o.join("")}),clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*_.DEG2RAD},radToDeg:function(t){return t*_.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},nearestPowerOfTwo:function(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))},nextPowerOfTwo:function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}};function v(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function b(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==i?i:1}function w(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}function g(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._order=i||g.DefaultOrder}function M(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.assign(v.prototype,{isMatrix4:!0,set:function(t,e,n,i,r,s,o,a,h,u,c,l,f,p,y,d){var m=this.elements;return m[0]=t,m[4]=e,m[8]=n,m[12]=i,m[1]=r,m[5]=s,m[9]=o,m[13]=a,m[2]=h,m[6]=u,m[10]=c,m[14]=l,m[3]=f,m[7]=p,m[11]=y,m[15]=d,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new v).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:(p=new w,function(t){var e=this.elements,n=t.elements,i=1/p.setFromMatrixColumn(t,0).length(),r=1/p.setFromMatrixColumn(t,1).length(),s=1/p.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[8]=n[8]*s,e[9]=n[9]*s,e[10]=n[10]*s,this}),makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,i=t.y,r=t.z,s=Math.cos(n),o=Math.sin(n),a=Math.cos(i),h=Math.sin(i),u=Math.cos(r),c=Math.sin(r);if("XYZ"===t.order){var l=s*u,f=s*c,p=o*u,y=o*c;e[0]=a*u,e[4]=-a*c,e[8]=h,e[1]=f+p*h,e[5]=l-y*h,e[9]=-o*a,e[2]=y-l*h,e[6]=p+f*h,e[10]=s*a}else if("YXZ"===t.order){var d=a*u,m=a*c,x=h*u,_=h*c;e[0]=d+_*o,e[4]=x*o-m,e[8]=s*h,e[1]=s*c,e[5]=s*u,e[9]=-o,e[2]=m*o-x,e[6]=_+d*o,e[10]=s*a}else if("ZXY"===t.order){d=a*u,m=a*c,x=h*u,_=h*c;e[0]=d-_*o,e[4]=-s*c,e[8]=x+m*o,e[1]=m+x*o,e[5]=s*u,e[9]=_-d*o,e[2]=-s*h,e[6]=o,e[10]=s*a}else if("ZYX"===t.order){l=s*u,f=s*c,p=o*u,y=o*c;e[0]=a*u,e[4]=p*h-f,e[8]=l*h+y,e[1]=a*c,e[5]=y*h+l,e[9]=f*h-p,e[2]=-h,e[6]=o*a,e[10]=s*a}else if("YZX"===t.order){var v=s*a,b=s*h,w=o*a,g=o*h;e[0]=a*u,e[4]=g-v*c,e[8]=w*c+b,e[1]=c,e[5]=s*u,e[9]=-o*u,e[2]=-h*u,e[6]=b*c+w,e[10]=v-g*c}else if("XZY"===t.order){v=s*a,b=s*h,w=o*a,g=o*h;e[0]=a*u,e[4]=-c,e[8]=h*u,e[1]=v*c+g,e[5]=s*u,e[9]=b*c-w,e[2]=w*c-b,e[6]=o*u,e[10]=g*c+v}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){var e=this.elements,n=t._x,i=t._y,r=t._z,s=t._w,o=n+n,a=i+i,h=r+r,u=n*o,c=n*a,l=n*h,f=i*a,p=i*h,y=r*h,d=s*o,m=s*a,x=s*h;return e[0]=1-(f+y),e[4]=c-x,e[8]=l+m,e[1]=c+x,e[5]=1-(u+y),e[9]=p-d,e[2]=l-m,e[6]=p+d,e[10]=1-(u+f),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},lookAt:(c=new w,l=new w,f=new w,function(t,e,n){var i=this.elements;return f.subVectors(t,e),0===f.lengthSq()&&(f.z=1),f.normalize(),c.crossVectors(n,f),0===c.lengthSq()&&(1===Math.abs(n.z)?f.x+=1e-4:f.z+=1e-4,f.normalize(),c.crossVectors(n,f)),c.normalize(),l.crossVectors(f,c),i[0]=c.x,i[4]=l.x,i[8]=f.x,i[1]=c.y,i[5]=l.y,i[9]=f.y,i[2]=c.z,i[6]=l.z,i[10]=f.z,this}),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,i=e.elements,r=this.elements,s=n[0],o=n[4],a=n[8],h=n[12],u=n[1],c=n[5],l=n[9],f=n[13],p=n[2],y=n[6],d=n[10],m=n[14],x=n[3],_=n[7],v=n[11],b=n[15],w=i[0],g=i[4],M=i[8],z=i[12],k=i[1],O=i[5],E=i[9],S=i[13],C=i[2],T=i[6],P=i[10],U=i[14],j=i[3],R=i[7],N=i[11],I=i[15];return r[0]=s*w+o*k+a*C+h*j,r[4]=s*g+o*O+a*T+h*R,r[8]=s*M+o*E+a*P+h*N,r[12]=s*z+o*S+a*U+h*I,r[1]=u*w+c*k+l*C+f*j,r[5]=u*g+c*O+l*T+f*R,r[9]=u*M+c*E+l*P+f*N,r[13]=u*z+c*S+l*U+f*I,r[2]=p*w+y*k+d*C+m*j,r[6]=p*g+y*O+d*T+m*R,r[10]=p*M+y*E+d*P+m*N,r[14]=p*z+y*S+d*U+m*I,r[3]=x*w+_*k+v*C+b*j,r[7]=x*g+_*O+v*T+b*R,r[11]=x*M+_*E+v*P+b*N,r[15]=x*z+_*S+v*U+b*I,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(){var t=new w;return function(e){for(var n=0,i=e.count;n<i;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.applyMatrix4(this),e.setXYZ(n,t.x,t.y,t.z);return e}}(),determinant:function(){var t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],s=t[1],o=t[5],a=t[9],h=t[13],u=t[2],c=t[6],l=t[10],f=t[14];return t[3]*(+r*a*c-i*h*c-r*o*l+n*h*l+i*o*f-n*a*f)+t[7]*(+e*a*f-e*h*l+r*s*l-i*s*f+i*h*u-r*a*u)+t[11]*(+e*h*c-e*o*f-r*s*c+n*s*f+r*o*u-n*h*u)+t[15]*(-i*o*u-e*a*c+e*o*l+i*s*c-n*s*l+n*a*u)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var n=this.elements,i=t.elements,r=i[0],s=i[1],o=i[2],a=i[3],h=i[4],u=i[5],c=i[6],l=i[7],f=i[8],p=i[9],y=i[10],d=i[11],m=i[12],x=i[13],_=i[14],v=i[15],b=p*_*l-x*y*l+x*c*d-u*_*d-p*c*v+u*y*v,w=m*y*l-f*_*l-m*c*d+h*_*d+f*c*v-h*y*v,g=f*x*l-m*p*l+m*u*d-h*x*d-f*u*v+h*p*v,M=m*p*c-f*x*c-m*u*y+h*x*y+f*u*_-h*p*_,z=r*b+s*w+o*g+a*M;if(0===z){var k="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(k);return console.warn(k),this.identity()}var O=1/z;return n[0]=b*O,n[1]=(x*y*a-p*_*a-x*o*d+s*_*d+p*o*v-s*y*v)*O,n[2]=(u*_*a-x*c*a+x*o*l-s*_*l-u*o*v+s*c*v)*O,n[3]=(p*c*a-u*y*a-p*o*l+s*y*l+u*o*d-s*c*d)*O,n[4]=w*O,n[5]=(f*_*a-m*y*a+m*o*d-r*_*d-f*o*v+r*y*v)*O,n[6]=(m*c*a-h*_*a-m*o*l+r*_*l+h*o*v-r*c*v)*O,n[7]=(h*y*a-f*c*a+f*o*l-r*y*l-h*o*d+r*c*d)*O,n[8]=g*O,n[9]=(m*p*a-f*x*a-m*s*d+r*x*d+f*s*v-r*p*v)*O,n[10]=(h*x*a-m*u*a+m*s*l-r*x*l-h*s*v+r*u*v)*O,n[11]=(f*u*a-h*p*a-f*s*l+r*p*l+h*s*d-r*u*d)*O,n[12]=M*O,n[13]=(f*x*o-m*p*o+m*s*y-r*x*y-f*s*_+r*p*_)*O,n[14]=(m*u*o-h*x*o-m*s*c+r*x*c+h*s*_-r*u*_)*O,n[15]=(h*p*o-f*u*o+f*s*c-r*p*c-h*s*y+r*u*y)*O,this},scale:function(t){var e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=1-n,s=t.x,o=t.y,a=t.z,h=r*s,u=r*o;return this.set(h*s+n,h*o-i*a,h*a+i*o,0,h*o+i*a,u*o+n,u*a-i*s,0,h*a-i*o,u*a+i*s,r*a*a+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){return this.makeRotationFromQuaternion(e),this.scale(n),this.setPosition(t),this},decompose:(h=new w,u=new v,function(t,e,n){var i=this.elements,r=h.set(i[0],i[1],i[2]).length(),s=h.set(i[4],i[5],i[6]).length(),o=h.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],u.copy(this);var a=1/r,c=1/s,l=1/o;return u.elements[0]*=a,u.elements[1]*=a,u.elements[2]*=a,u.elements[4]*=c,u.elements[5]*=c,u.elements[6]*=c,u.elements[8]*=l,u.elements[9]*=l,u.elements[10]*=l,e.setFromRotationMatrix(u),n.x=r,n.y=s,n.z=o,this}),makePerspective:function(t,e,n,i,r,s){void 0===s&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,a=2*r/(e-t),h=2*r/(n-i),u=(e+t)/(e-t),c=(n+i)/(n-i),l=-(s+r)/(s-r),f=-2*s*r/(s-r);return o[0]=a,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=h,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=l,o[14]=f,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(t,e,n,i,r,s){var o=this.elements,a=1/(e-t),h=1/(n-i),u=1/(s-r),c=(e+t)*a,l=(n+i)*h,f=(s+r)*u;return o[0]=2*a,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*h,o[9]=0,o[13]=-l,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-f,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}),Object.assign(b,{slerp:function(t,e,n,i){return n.copy(t).slerp(e,i)},slerpFlat:function(t,e,n,i,r,s,o){var a=n[i+0],h=n[i+1],u=n[i+2],c=n[i+3],l=r[s+0],f=r[s+1],p=r[s+2],y=r[s+3];if(c!==y||a!==l||h!==f||u!==p){var d=1-o,m=a*l+h*f+u*p+c*y,x=m>=0?1:-1,_=1-m*m;if(_>Number.EPSILON){var v=Math.sqrt(_),b=Math.atan2(v,m*x);d=Math.sin(d*b)/v,o=Math.sin(o*b)/v}var w=o*x;if(a=a*d+l*w,h=h*d+f*w,u=u*d+p*w,c=c*d+y*w,d===1-o){var g=1/Math.sqrt(a*a+h*h+u*u+c*c);a*=g,h*=g,u*=g,c*=g}}t[e]=a,t[e+1]=h,t[e+2]=u,t[e+3]=c}}),Object.defineProperties(b.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback()}}}),Object.assign(b.prototype,{set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,i=t._y,r=t._z,s=t.order,o=Math.cos,a=Math.sin,h=o(n/2),u=o(i/2),c=o(r/2),l=a(n/2),f=a(i/2),p=a(r/2);return"XYZ"===s?(this._x=l*u*c+h*f*p,this._y=h*f*c-l*u*p,this._z=h*u*p+l*f*c,this._w=h*u*c-l*f*p):"YXZ"===s?(this._x=l*u*c+h*f*p,this._y=h*f*c-l*u*p,this._z=h*u*p-l*f*c,this._w=h*u*c+l*f*p):"ZXY"===s?(this._x=l*u*c-h*f*p,this._y=h*f*c+l*u*p,this._z=h*u*p+l*f*c,this._w=h*u*c-l*f*p):"ZYX"===s?(this._x=l*u*c-h*f*p,this._y=h*f*c+l*u*p,this._z=h*u*p-l*f*c,this._w=h*u*c+l*f*p):"YZX"===s?(this._x=l*u*c+h*f*p,this._y=h*f*c+l*u*p,this._z=h*u*p-l*f*c,this._w=h*u*c-l*f*p):"XZY"===s&&(this._x=l*u*c-h*f*p,this._y=h*f*c-l*u*p,this._z=h*u*p+l*f*c,this._w=h*u*c+l*f*p),!1!==e&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e,n=t.elements,i=n[0],r=n[4],s=n[8],o=n[1],a=n[5],h=n[9],u=n[2],c=n[6],l=n[10],f=i+a+l;return f>0?(e=.5/Math.sqrt(f+1),this._w=.25/e,this._x=(c-h)*e,this._y=(s-u)*e,this._z=(o-r)*e):i>a&&i>l?(e=2*Math.sqrt(1+i-a-l),this._w=(c-h)/e,this._x=.25*e,this._y=(r+o)/e,this._z=(s+u)/e):a>l?(e=2*Math.sqrt(1+a-i-l),this._w=(s-u)/e,this._x=(r+o)/e,this._y=.25*e,this._z=(h+c)/e):(e=2*Math.sqrt(1+l-i-a),this._w=(o-r)/e,this._x=(s+u)/e,this._y=(h+c)/e,this._z=.25*e),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,e=new w;return function(n,i){return void 0===e&&(e=new w),(t=n.dot(i)+1)<1e-6?(t=0,Math.abs(n.x)>Math.abs(n.z)?e.set(-n.y,n.x,0):e.set(0,-n.z,n.y)):e.crossVectors(n,i),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,i=t._y,r=t._z,s=t._w,o=e._x,a=e._y,h=e._z,u=e._w;return this._x=n*u+s*o+i*h-r*a,this._y=i*u+s*a+r*o-n*h,this._z=r*u+s*h+n*a-i*o,this._w=s*u-n*o-i*a-r*h,this.onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,i=this._y,r=this._z,s=this._w,o=s*t._w+n*t._x+i*t._y+r*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=s,this._x=n,this._y=i,this._z=r,this;var a=Math.sqrt(1-o*o);if(Math.abs(a)<.001)return this._w=.5*(s+this._w),this._x=.5*(n+this._x),this._y=.5*(i+this._y),this._z=.5*(r+this._z),this;var h=Math.atan2(a,o),u=Math.sin((1-e)*h)/a,c=Math.sin(e*h)/a;return this._w=s*u+this._w*c,this._x=n*u+this._x*c,this._y=i*u+this._y*c,this._z=r*u+this._z*c,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(w.prototype,{isVector3:!0,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:(m=new b,function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(m.setFromEuler(t))}),applyAxisAngle:function(){var t=new b;return function(e,n){return this.applyQuaternion(t.setFromAxisAngle(e,n))}}(),applyMatrix3:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements,s=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*s,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*s,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*s,this},applyQuaternion:function(t){var e=this.x,n=this.y,i=this.z,r=t.x,s=t.y,o=t.z,a=t.w,h=a*e+s*i-o*n,u=a*n+o*e-r*i,c=a*i+r*n-s*e,l=-r*e-s*n-o*i;return this.x=h*a+l*-r+u*-o-c*-s,this.y=u*a+l*-s+c*-r-h*-o,this.z=c*a+l*-o+h*-s-u*-r,this},project:function(){var t=new v;return function(e){return t.multiplyMatrices(e.projectionMatrix,t.getInverse(e.matrixWorld)),this.applyMatrix4(t)}}(),unproject:function(){var t=new v;return function(e){return t.multiplyMatrices(e.matrixWorld,t.getInverse(e.projectionMatrix)),this.applyMatrix4(t)}}(),transformDirection:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:(y=new w,d=new w,function(t,e){return y.set(t,t,t),d.set(e,e,e),this.clamp(y,d)}),clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},cross:function(t,e){if(void 0!==e)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e);var n=this.x,i=this.y,r=this.z;return this.x=i*t.z-r*t.y,this.y=r*t.x-n*t.z,this.z=n*t.y-i*t.x,this},crossVectors:function(t,e){var n=t.x,i=t.y,r=t.z,s=e.x,o=e.y,a=e.z;return this.x=i*a-r*o,this.y=r*s-n*a,this.z=n*o-i*s,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(){var t=new w;return function(e){return t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t=new w;return function(e){return this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(_.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i},distanceToManhattan:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){var e=Math.sin(t.phi)*t.radius;return this.x=e*Math.sin(t.theta),this.y=Math.cos(t.phi)*t.radius,this.z=e*Math.cos(t.theta),this},setFromCylindrical:function(t){return this.x=t.radius*Math.sin(t.theta),this.y=t.y,this.z=t.radius*Math.cos(t.theta),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}}),g.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],g.DefaultOrder="XYZ",Object.defineProperties(g.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback()}}}),Object.assign(g.prototype,{isEuler:!0,set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._order=i||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var i=_.clamp,r=t.elements,s=r[0],o=r[4],a=r[8],h=r[1],u=r[5],c=r[9],l=r[2],f=r[6],p=r[10];return"XYZ"===(e=e||this._order)?(this._y=Math.asin(i(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(-c,p),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(f,u),this._z=0)):"YXZ"===e?(this._x=Math.asin(-i(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(a,p),this._z=Math.atan2(h,u)):(this._y=Math.atan2(-l,s),this._z=0)):"ZXY"===e?(this._x=Math.asin(i(f,-1,1)),Math.abs(f)<.99999?(this._y=Math.atan2(-l,p),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(h,s))):"ZYX"===e?(this._y=Math.asin(-i(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(f,p),this._z=Math.atan2(h,s)):(this._x=0,this._z=Math.atan2(-o,u))):"YZX"===e?(this._z=Math.asin(i(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-l,s)):(this._x=0,this._y=Math.atan2(a,p))):"XZY"===e?(this._z=Math.asin(-i(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(f,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-c,p),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var t=new v;return function(e,n,i){return t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,n,i)}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:(x=new b,function(t){return x.setFromEuler(this),this.setFromQuaternion(x,t)}),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new w(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}});var z=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.position=new w(0,0,0),this.worldPosition=new w(0,0,0),this.rotation=new g(0,0,0),this.scale=new w(1,1,1),this.modelMatrix=new v,this.worldModelMatrix=new v,this.normal=new w(0,0,1),this.modelMatrixNeedUpdate=!1,this.worldModelMatrixNeedUpdate=!1,this.normalNeedUpdate=!1,this.elem=null,this.userData={}}var e,n,i;return e=t,(n=[{key:"setNeedUpdate",value:function(){this.modelMatrixNeedUpdate=!0,this.worldModelMatrixNeedUpdate=!0,this.normalNeedUpdate=!0}},{key:"setPosition",value:function(t,e,n){this.position.set(t,e,n),this.setNeedUpdate()}},{key:"setPositionX",value:function(t){this.position.x=t,this.setNeedUpdate()}},{key:"setPositionY",value:function(t){this.position.y=t,this.setNeedUpdate()}},{key:"setPositionZ",value:function(t){this.position.z=t,this.setNeedUpdate()}},{key:"setRotation",value:function(t,e,n){this.rotation.set(t,e,n),this.setNeedUpdate()}},{key:"setRotationX",value:function(t){this.rotation.x=t,this.setNeedUpdate()}},{key:"setRotationY",value:function(t){this.rotation.y=t,this.setNeedUpdate()}},{key:"setRotationZ",value:function(t){this.rotation.z=t,this.setNeedUpdate()}},{key:"setScale",value:function(t,e,n){this.scale.set(t,e,n),this.setNeedUpdate()}},{key:"setScaleX",value:function(t){this.scale.x=t,this.setNeedUpdate()}},{key:"setScaleY",value:function(t){this.scale.y=t,this.setNeedUpdate()}},{key:"setScaleZ",value:function(t){this.scale.z=t,this.setNeedUpdate()}},{key:"getModelMatrix",value:function(){if(!this.modelMatrixNeedUpdate)return this.modelMatrix;var t=this.position.clone(),e=this.rotation.clone(),n=this.scale.clone(),i=(new v).makeScale(n.x,n.y,n.z),r=(new v).makeRotationFromEuler(e),s=(new v).makeTranslation(t.x,t.y,t.z).multiply(r).multiply(i);return this.modelMatrix=s.clone(),this.modelMatrixNeedUpdate=!1,s}},{key:"getWorldModalMatrix",value:function(){if(!this.worldModelMatrixNeedUpdate)return this.worldModelMatrix;var t=this.parent,e=this.getModelMatrix();return t&&(e=(new v).multiplyMatrices(t.getWorldModalMatrix(),e)),this.worldModelMatrixNeedUpdate=!1,this.worldModelMatrix=e.clone(),e}},{key:"getWorldNormal",value:function(){if(!this.normalNeedUpdate)return this.normal;var t=new w(0,0,0),e=new w(0,0,1),n=this.getWorldModalMatrix();return t=t.applyMatrix4(n),e=e.applyMatrix4(n),this.normal=(new w).subVectors(e,t),this.normalNeedUpdate=!1,this.normal.clone()}},{key:"setModelMatrix",value:function(t){this.modelMatrix=t,this.elemMatrixNeedUpdate=!0}},{key:"updateElemMatrix",value:function(){if(this.elemMatrixNeedUpdate){var t=this.getModelMatrix().elements.map(function(t){return t.toFixed(6)});this.elem.style.transform="translate(-50%, -50%) matrix3d(".concat(t.join(","),")"),this.elemMatrixNeedUpdate=!1}}}])&&M(e.prototype,n),i&&M(e,i),t}();function k(t,e){for(var n in e){var i=e[n];"number"==typeof i&&(i+="px"),t.style[n]=i}}function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function E(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function S(t,e){return!e||"object"!==O(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function C(t,e,n){return(C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=T(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function T(t){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function P(t,e){return(P=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var U=function(t){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=S(this,T(e).call(this))).options=i,n.elemMatrixNeedUpdate=!0,n.elemLightNeedUpdate=!0,n.brightness=1,n.backside=!1,n.lightHandler;return n.elem=t||document.createElement("div"),n.options.name&&n.elem.classList.add("c3-face-".concat(n.options.name)),k(n.elem,{position:"absolute",top:"50%",left:"50%",overflow:"hidden","box-sizing":"border-box"}),n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&P(t,e)}(e,z),n=e,(i=[{key:"setNeedUpdate",value:function(){C(T(e.prototype),"setNeedUpdate",this).call(this),this.elemMatrixNeedUpdate=!0,this.elemLightNeedUpdate=!0}},{key:"setBrightness",value:function(t){this.brightness!==t&&(this.brightness=t,this.elemLightNeedUpdate=!0)}},{key:"updateElemBrightness",value:function(){this.elemLightNeedUpdate&&("function"==typeof this.lightHandler?this.lightHandler(this.elem,this.brightness):this.elem.style.filter="brightness(".concat(this.brightness,")"),this.elemLightNeedUpdate=!1)}}])&&E(n.prototype,i),r&&E(n,r),e}();function j(t){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function R(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function N(t,e){return!e||"object"!==j(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function I(t,e,n){return(I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=A(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function A(t){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function F(t,e){return(F=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var V=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=N(this,A(e).call(this))).elemMatrixNeedUpdate=!0,n.children=[],n.elem=t||document.createElement("div");return k(n.elem,{position:"absolute",top:"50%",left:"50%","transform-style":"preserve-3d"}),n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&F(t,e)}(e,z),n=e,(i=[{key:"setNeedUpdate",value:function(){I(A(e.prototype),"setNeedUpdate",this).call(this),this.elemMatrixNeedUpdate=!0,this.children.forEach(function(t){t.normalNeedUpdate=!0,t.worldModelMatrixNeedUpdate=!0})}},{key:"add",value:function(t){this.children.push(t),t.parent=this,t.elem&&this.elem.appendChild(t.elem)}}])&&R(n.prototype,i),r&&R(n,r),e}();function Y(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var q=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.updated=!0}var e,n,i;return e=t,(n=[{key:"setNeedUpdate",value:function(){this.updated=!0}},{key:"calBrightness",value:function(t,e,n){return 0}}])&&Y(e.prototype,n),i&&Y(e,i),t}();function X(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Z=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n={position:"absolute",top:0,left:0,width:"100%",height:"100%","transform-style":"preserve-3d"};for(var i in this.container=e,this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.viewWrapper=document.createElement("div"),Object.assign(n,{width:this.width,height:this.height}),n){var r=n[i];"number"==typeof r&&(r+="px"),this.viewWrapper.style[i]=r}this.container.appendChild(this.viewWrapper),this.objs=[],this.lights=[],this.sizeUpdated=!0}var e,n,i;return e=t,(n=[{key:"resize",value:function(){var t={position:"absolute",top:0,left:0,width:"100%",height:"100%","transform-style":"preserve-3d"};for(var e in this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,Object.assign(t,{width:this.width,height:this.height}),t){var n=t[e];"number"==typeof n&&(n+="px"),this.viewWrapper.style[e]=n}this.sizeUpdated=!0}},{key:"add",value:function(t){this.objs.push(t),t.elem&&this.viewWrapper.appendChild(t.elem)}},{key:"addLight",value:function(t){this.lights.push(t)}},{key:"setAmbientLightIntensity",value:function(t){this.ambientLightIntensity=t}}])&&X(e.prototype,n),i&&X(e,i),t}();function D(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var L=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.position=new w(0,0,0),this.lookAtPoint=new w(0,0,-1),this.up=new w(0,1,0),this.viewMatrixNeedUpdate=!0,this.viewMatrix=new v,this.perspective=e,this.configUpdated=!0}var e,n,i;return e=t,(n=[{key:"setPerspective",value:function(t){this.perspective=t,this.configUpdated=!0}},{key:"setNeedUpdate",value:function(){this.viewMatrixNeedUpdate=!0}},{key:"setPosition",value:function(t,e,n){this.position.set(t,e,n),this.setNeedUpdate()}},{key:"setPositionX",value:function(t){this.position.x=t,this.setNeedUpdate()}},{key:"setPositionY",value:function(t){this.position.y=t,this.setNeedUpdate()}},{key:"setPositionZ",value:function(t){this.position.z=t,this.setNeedUpdate()}},{key:"translateX",value:function(t){this.position.x+=t,this.setNeedUpdate()}},{key:"translateY",value:function(t){this.position.y+=t,this.setNeedUpdate()}},{key:"translateZ",value:function(t){this.position.z+=t,this.setNeedUpdate()}},{key:"setLookAt",value:function(t,e,n){this.lookAtPoint.set(t,e,n),this.setNeedUpdate()}},{key:"lookAt",value:function(t){var e=t.x,n=t.y,i=t.z;this.setLookAt(e,n,i)}},{key:"setLookAtX",value:function(t){this.lookAtPoint.x=t,this.setNeedUpdate()}},{key:"setLookAtY",value:function(t){this.lookAtPoint.y=t,this.setNeedUpdate()}},{key:"setLookAtZ",value:function(t){this.lookAtPoint.z=t,this.setNeedUpdate()}},{key:"setUp",value:function(t,e,n){this.up.set(t,e,n),this.setNeedUpdate()}},{key:"setUpX",value:function(t){this.up.x=t,this.setNeedUpdate()}},{key:"setUpY",value:function(t){this.up.y=t,this.setNeedUpdate()}},{key:"setUpZ",value:function(t){this.up.z=t,this.setNeedUpdate()}},{key:"getViewMatrix",value:function(){if(!this.viewMatrixNeedUpdate)return this.viewMatrix;var t=this.position.clone(),e=this.up.clone(),n=this.lookAtPoint.clone(),i=(new v).makeTranslation(t.x,t.y,t.z),r=(new v).lookAt(t,n,e);return this.viewMatrixNeedUpdate=!1,this.viewMatrix=i.multiply(r),this.viewMatrix.getInverse(this.viewMatrix),this.viewMatrix.clone()}}])&&D(e.prototype,n),i&&D(e,i),t}();function B(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var H=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);e=Object.assign({lightEffect:!1,clearColor:""},e),this.options=e}var e,n,i;return e=t,(n=[{key:"setObj",value:function(t,e,n){var i=this;if(t instanceof U){if(this.options.lightEffect&&(n||t.normalNeedUpdate)){var r=t.getWorldNormal(),s=0;e.forEach(function(e){s+=e.calBrightness(t.position,r,t.backside)}),t.setBrightness(s),t.updateElemBrightness()}t.updateElemMatrix()}else t instanceof V&&t.children.length>0&&(t.updateElemMatrix(),t.children.forEach(function(t){return i.setObj(t,e)}))}},{key:"render",value:function(t,e){var n=this,i=e.viewMatrixNeedUpdate,r=e.getViewMatrix().elements.map(function(t){return t.toFixed(6)});if(e.configUpdated&&(e.perspective&&e.configUpdated&&(t.container.style.perspective="".concat(e.perspective,"px")),e.configUpdated=!1),i){t.height,Math.tan(e.fov/2);t.viewWrapper.style.transform="matrix3d(".concat(r.join(","),")")}var s=!1;t.lights.forEach(function(t){s=s||t.updated,t.updated=!1}),t.lights.forEach(function(t){s=s||t.updated,t.updated=!1}),t.objs.forEach(function(e){n.setObj(e,t.lights,s)})}}])&&B(e.prototype,n),i&&B(e,i),t}();function Q(t){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function W(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function G(t,e){return!e||"object"!==Q(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function J(t){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function K(t,e){return(K=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var $=function(t){function e(t,n){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=G(this,J(e).call(this))).position=t||new Vector3(0,1,0),i.intensity=n||1,i.updated=!0,i}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&K(t,e)}(e,q),n=e,(i=[{key:"setNeedUpdate",value:function(){this.updated=!0}},{key:"setPosition",value:function(t,e,n){this.position.set(t,e,n),this.setNeedUpdate()}},{key:"setPositionX",value:function(t){this.position.x=t,this.setNeedUpdate()}},{key:"setPositionY",value:function(t){this.position.y=t,this.setNeedUpdate()}},{key:"setPositionZ",value:function(t){this.position.z=t,this.setNeedUpdate()}},{key:"setIntensity",value:function(t){this.intensity=intensity,setNeedUpdate()}},{key:"calBrightness",value:function(t,e,n){var i=this.position.clone(),r=i.dot(e)/(1*i.length()),s=0;return s=n?Math.abs(r):r<0?0:r,s*=this.intensity}}])&&W(n.prototype,i),r&&W(n,r),e}();function tt(t){return(tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function et(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function nt(t,e){return!e||"object"!==tt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function it(t){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rt(t,e){return(rt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var st=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=nt(this,it(e).call(this))).intensity=t,n.updated=!0,n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rt(t,e)}(e,q),n=e,(i=[{key:"setIntensity",value:function(t){this.intensity=intensity,setNeedUpdate()}},{key:"calBrightness",value:function(){return this.intensity}}])&&et(n.prototype,i),r&&et(n,r),e}(),ot=2*Math.PI,at=Math.PI,ht=.8333333333*Math.PI,ut=.6666666666*Math.PI,ct=.5*Math.PI,lt=.3333333333*Math.PI,ft=.25*Math.PI,pt=.1666666667*Math.PI;function yt(t){return(yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function mt(t,e){return!e||"object"!==yt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function xt(t){return(xt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _t(t,e){return(_t=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var vt=function(t){function e(t,n,i,r){var s;for(var o in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=mt(this,xt(e).call(this))).width=t,s.height=n,s.depth=i,s.faces={front:new U,back:new U,left:new U,right:new U,top:new U,bottom:new U},s.setSize(t,n,i),s.faces)s.faces[o].elem.style.background=r,s.faces[o].elem.style.fontSize="60px",s.faces[o].elem.style.color="red",s.faces[o].elem.style.textAlign="center",s.add(s.faces[o]);return s}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_t(t,e)}(e,V),n=e,(i=[{key:"setSize",value:function(t,e,n){this.faces.front.setPosition(0,0,n/2),this.faces.front.elem.style.width=t+"px",this.faces.front.elem.style.height=e+"px",this.faces.back.setPosition(0,0,-n/2),this.faces.back.rotation.x=at,this.faces.back.elem.style.width=t+"px",this.faces.back.elem.style.height=e+"px",this.faces.left.setPosition(-t/2,0,0),this.faces.left.rotation.y=-ct,this.faces.left.elem.style.width=n+"px",this.faces.left.elem.style.height=e+"px",this.faces.right.setPosition(t/2,0,0),this.faces.right.rotation.y=ct,this.faces.right.elem.style.width=n+"px",this.faces.right.elem.style.height=e+"px",this.faces.top.setPosition(0,e/2,0),this.faces.top.rotation.x=-ct,this.faces.top.elem.style.width=t+"px",this.faces.top.elem.style.height=n+"px",this.faces.bottom.setPosition(0,-e/2,0),this.faces.bottom.rotation.x=ct,this.faces.bottom.elem.style.width=t+"px",this.faces.bottom.elem.style.height=n+"px",this.width=t,this.height=e,this.depth=n}},{key:"setColor",value:function(t){if(t)for(var e in this.color=t,this.faces)this.faces[e].elem.style.color=t}}])&&dt(n.prototype,i),r&&dt(n,r),e}();function bt(t){return(bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function gt(t,e){return!e||"object"!==bt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Mt(t){return(Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zt(t,e){return(zt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var kt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=gt(this,Mt(e).call(this))).options=t,n.createFaces(t),n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zt(t,e)}(e,V),n=e,(i=[{key:"createFaces",value:function(t){var e=t.radiusTop,n=t.radiusBottom,i=t.height,r=t.radiusSegment,s=t.sideBackground,o=t.topBackground,a=t.bottomBackground,h=2*Math.PI/r,u=h/2,c=Math.cos(u),l=Math.sin(u),f=e*c,p=e*l*2,y=n*c,d=n*l*2,m=Math.max(p,d),x=y-f,_=d-p,b=_/2,g=Math.abs(b),M=Math.atan(x/i),z=i/Math.cos(M),O=(new v).makeTranslation(0,z/2,0);O.multiplyMatrices((new v).makeRotationX(M),O),O.multiplyMatrices((new v).makeTranslation(0,-i/2,f),O);var E={height:z};_>0?Object.assign(E,{"-webkit-clip-path":"polygon(0 100%, ".concat(g,"px 0, ").concat(Math.abs(d)-g,"px 0, 100% 100%)"),width:d}):_<0?Object.assign(E,{"-webkit-clip-path":"polygon(0 0, ".concat(g,"px 100%, ").concat(Math.abs(p)-g,"px 100%, 100% 0%)"),width:p}):Object.assign(E,{width:p}),s&&Object.assign(E,{background:s,"background-size":"auto ".concat(z,"px")});for(var S=0;S<r;S++){var C=new U(null,{name:"cylinder-side".concat(S)}),T=(new v).makeRotationAxis(new w(0,1,0),S*h);k(C.elem,E),s&&(C.elem.style["background-position"]="".concat(-m*S,"px 0")),T.multiplyMatrices(T,O),C.setModelMatrix(T),this.add(C)}if(!t.open){for(var P=[],j=[],R={width:2*e,height:2*e,background:o,"background-size":"100% 100%"},N={width:2*n,height:2*n,background:a,"background-size":"100%"},I=-u-ct,A=0;A<r;A++){var F=I-A*h;P.push([Math.cos(F)*e+e,Math.sin(F)*e+e]),j.push([Math.cos(F)*n+n,Math.sin(F)*n+n])}var V=P.map(function(t){return"".concat(t[0],"px ").concat(t[1],"px")}).join(","),Y=j.map(function(t){return"".concat(t[0],"px ").concat(t[1],"px")}).join(",");Object.assign(R,{"-webkit-clip-path":"polygon(".concat(V,")")}),Object.assign(N,{"-webkit-clip-path":"polygon(".concat(Y,")")});var q=new U,X=new U;q.setPosition(0,-i/2,0),q.setRotation(ct,0,0),X.setPosition(0,i/2,0),X.setRotation(-ct,0,0),k(q.elem,R),k(X.elem,N),this.add(q),this.add(X)}}}])&&wt(n.prototype,i),r&&wt(n,r),e}();function Ot(t,e){this.x=t||0,this.y=e||0}Object.defineProperties(Ot.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(Ot.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(){var t=new Ot,e=new Ot;return function(n,i){return t.set(n,n),e.set(i,i),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},distanceToManhattan:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,s=this.y-t.y;return this.x=r*n-s*i+t.x,this.y=r*i+s*n+t.y,this}}),n.d(e,"Face",function(){return U}),n.d(e,"Group",function(){return V}),n.d(e,"Scene",function(){return Z}),n.d(e,"Camera",function(){return L}),n.d(e,"Renderer",function(){return H}),n.d(e,"AmbientLight",function(){return st}),n.d(e,"DirectionLight",function(){return $}),n.d(e,"Box",function(){return vt}),n.d(e,"Cylinder",function(){return kt}),n.d(e,"CONST",function(){return i}),n.d(e,"Math",function(){return _}),n.d(e,"Vector2",function(){return Ot}),n.d(e,"Vector3",function(){return w}),n.d(e,"Matrix4",function(){return v}),n.d(e,"Euler",function(){return g}),n.d(e,"Quaternion",function(){return b})}]);
//# sourceMappingURL=main.js.map